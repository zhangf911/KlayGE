ADD_CUSTOM_TARGET(AllInEngine)
SET_TARGET_PROPERTIES(AllInEngine PROPERTIES FOLDER "KlayGE/Engine")

ADD_SUBDIRECTORY(Core/TableGen)
ADD_SUBDIRECTORY(Core)

ADD_SUBDIRECTORY(Plugins/Scene/OCTree)
ADD_SUBDIRECTORY(Plugins/Input/MsgInput)
ADD_SUBDIRECTORY(Plugins/Script/Python)
ADD_SUBDIRECTORY(Plugins/Audio/OggVorbis)

IF(NOT KLAYGE_PLATFORM_WINDOWS_STORE)
	IF((NOT KLAYGE_PLATFORM_ANDROID) AND (NOT KLAYGE_PLATFORM_IOS))
		ADD_SUBDIRECTORY(Plugins/Render/OpenGL)
	ENDIF()
	ADD_SUBDIRECTORY(Plugins/Render/OpenGLES)
ENDIF()
IF((KLAYGE_PLATFORM_WINDOWS_DESKTOP AND (NOT KLAYGE_COMPILER_CLANGCL)) OR KLAYGE_PLATFORM_LINUX OR KLAYGE_PLATFORM_DARWIN OR KLAYGE_PLATFORM_ANDROID)
	ADD_SUBDIRECTORY(Plugins/Audio/OpenAL)
ENDIF()
IF(KLAYGE_IS_DEV_PLATFORM)
	ADD_SUBDIRECTORY(Plugins/DevHelper)
ENDIF()
IF(KLAYGE_PLATFORM_WINDOWS)
	ADD_SUBDIRECTORY(Plugins/Render/D3D11)
	ADD_SUBDIRECTORY(Plugins/Render/D3D12)
	if(KLAYGE_COMPILER_MSVC OR KLAYGE_COMPILER_CLANGCL)
		add_subdirectory(Plugins/Audio/XAudio)
	endif()

	IF(KLAYGE_PLATFORM_WINDOWS_DESKTOP)
		ADD_SUBDIRECTORY(Plugins/Show/DShow)
		ADD_SUBDIRECTORY(KGEConfig)
	ENDIF()
	ADD_SUBDIRECTORY(Plugins/Show/MFShow)
ENDIF()

IF(KLAYGE_IS_DEV_PLATFORM)
	ADD_SUBDIRECTORY(Plugins/Render/NullRender)
ENDIF()
ADD_SUBDIRECTORY(Plugins/Audio/NullAudio)
ADD_SUBDIRECTORY(Plugins/Audio/NullAudioDataSource)
ADD_SUBDIRECTORY(Plugins/Input/NullInput)
ADD_SUBDIRECTORY(Plugins/Script/NullScript)
ADD_SUBDIRECTORY(Plugins/Show/NullShow)
